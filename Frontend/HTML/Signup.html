<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup form in html and css </title>
    <link rel="stylesheet" href="../CSS/signup.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>

<body>
   
    <div class="popup-container" id="popupContainer">
        <div class="popup">
          <span class="close" id="closePopup">&times;</span>
          <h2>Username Already Exists</h2>
          <p>The Username already exists in the system.Try again using different Username.</p>
        </div>
      </div>
    <div class="wrapper">
        <!-- <form action="../HTML/dispaly.html" method="post" onsubmit = "return validateForm()"> -->
            <form onsubmit="storeData(); return false;">
            <h1>Sign Up</h1>
            <div class="input-box">
                <input type="text" id="fname" name="fname" placeholder="First Name" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z" /></svg>
            </div>
            <div class="input-box">
                <input type="text" id="lname" name="lname" placeholder="Last Name" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z" /></svg>
            </div>
            <div class="input-box">
                <input type="email" name="mail" id="mail" placeholder="Email" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 2c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8zm-.79 11.97l-3.16-3.16a.75.75 0 0 1 1.06-1.06l2.47 2.47 5.34-5.34a.75.75 0 1 1 1.06 1.06l-5.91 5.91a.75.75 0 0 1-1.06 0z" /></svg>
            </div>
            <div class="input-box">
                <input type="tel" id="mobileno" name="mobileno" placeholder="Mobile Number" pattern="[0-9]{10}"  required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"/></svg>
            </div>
            
            <div class="input-box">
                <input type="text" id="username" name="username" placeholder="Username" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z" /></svg>
            </div>
            
            <div class="input-box">
                <input type="password" name="pass" id="pass" placeholder="Password" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M20 12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z" /></svg>

            </div>

            <div class="input-box">
                <input type="password" id="pass1" placeholder=" Repeat Password" required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path
                        d="M20 12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z" /></svg>

            </div>
            <label for="usertype">User Type:</label>
                <select id="usertype" name="usertype" required>
                <option value="" disabled selected>Select User Type</option>
                <option value="Applicant">Applicant</option>
                <option value="Organizer">Organizer</option>
                <option value="Organization">Organization</option>
                <!-- Add more options as needed -->
                </select>
<br><br>
            <button type="submit" class="btn">Sign Up</button>
            <div class="register-link">
                <p>Already have an account? <a href="login.html">Login</a></p>
            </div>
        </form>
        <script>
            function storeData() {
                const fname = document.getElementById("fname").value;
                const lname = document.getElementById("lname").value;
                const email = document.getElementById("mail").value;
                const mobileno = document.getElementById("mobileno").value;
                const username = document.getElementById("username").value;
                const pass = document.getElementById("pass").value;
                const usertype = document.getElementById("usertype").value;
                   
                
                if (!validateEmail(email)) {
                alert("Please enter a valid email.");
                return;
                }

                if (!validatePhone(mobileno)) {
                    alert("Please enter a valid 10-digit mobile number.");
                    return;
                }

                if (!validatePassword(pass)) {
                    alert("Password must be at least 8 characters and include uppercase, lowercase, number, and special character.");
                    return;
                }

                if (pass !== pass1) {
                    alert("Passwords do not match.");
                    return;
                }
                

                // Create an object from the variables
                const person = {fname, lname, email, mobileno,username,pass,usertype};

                // Convert the object to a JSON string
                const jsonString = JSON.stringify(person);

                fetch('http://localhost:3000/register', {
                method: 'POST',
                headers: {
                'Content-Type': 'application/json'
                },
                body: jsonString
                })
                .then(response => response.json())
                .then(responseData => {
                console.log('Server response:', responseData);
                })
                .catch(error => {
                console.error('Error sending data:', error);
              });
            }
            
            function validateEmail(email) {
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return emailPattern.test(email);
            }

            function validatePhone(mobileno) {
                const phonePattern = /^[0-9]{10}$/;
                return phonePattern.test(mobileno);
            }

            function validatePassword(password) {
                // Minimum eight characters, at least one uppercase letter, one lowercase letter, one number, and one special character
                const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                
                return passwordPattern.test(password);
            }

        </script>
        <!-- <script src="..//SCRIPT/signup.js"></script> -->
    </div>
    
</body>

</html>