
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,
    initial-scale=1,0">
    <title>Login form in html and css </title>
    <link rel="stylesheet" href="../CSS/login.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
     
       
    <div class="wrapper">
        <form onclick="sendreq(); return false;" id="loginForm">
            <h1>Login</h1>
            <div class="input-box">
                <input type="text" id="Username" placeholder="Username"
                required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z"/></svg>
            </div>
            <div class="input-box">
                <input type="password" id="Password" placeholder="Password"
                required>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 12c0-1.103-.897-2-2-2h-1V7c0-2.757-2.243-5-5-5S7 4.243 7 7v3H6c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-8zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v3H9V7z"/></svg>
       
            </div>
           

            <button type="submit" id="openButton" class="btn">Login</button>
                <div class="register-link">
                    <!-- <p>Get Username and Password</p> -->
                    <a type="button" href="" class="text-link popuplink">Get Username and Password</a></p>
                </div><br>
                <div>
                    <p style="text-align: center; color: #ffffff;">If you are visiting for the first time, <a onclick="signup()" data-toggle="modal" data-target="#myModalInst" class="text-link popuplink">Click Here</a></p>
                    <br>
                </div>
                <!-- <div>
                    <p>If you are visiting for the first time</p><a type="button" data-toggle="modal" data-target="#myModalInst" class="text-link popuplink">Click Here</a>
                </div> -->
        </form>
        <script>
            
            function signup() {
    fetch('http://localhost:3000/Signup', {
        method: 'GET',
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.text(); // You could process the HTML if needed
    })
    .then(data => {
        // Optional: Do something with the data if needed
        console.log('HTML content received');
        
        // Redirect to the /Signup URL
        window.location.href = 'http://localhost:3000/Signup';
    })
    .catch(error => {
        console.error('There was a problem with the fetch operation:', error);
    });
}



            function sendreq() {
  const username = document.getElementById("Username").value;
  const password = document.getElementById("Password").value;

  const packet = { username, password };
  const jsonString = JSON.stringify(packet);

  console.log(jsonString);
  fetch('http://localhost:3000/login-packet', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: jsonString
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(responseData => {
    console.log('Server response:', responseData);
    if (responseData.redirectURL) {
      window.top.location.href = responseData.redirectURL;
    }
  })
  .catch(error => {
    console.error('Error sending data:', error);
  });
}


        </script>
    </div>
</body>

</html>